<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Créer une nouvelle facture</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
  <h1>Créer une nouvelle facture</h1>

  <form>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group mb-3">
          <label for="client_name">Nom du Client</label>
          <input type="text" id="client_name" class="form-control" required>
        </div>

    @* ici on va selectionner le client *@
    </div>

    <h3>ligne</h3>
    <table class="table">
      <thead>
        <tr>
          <th>Description</th>
          <th>Quantité</th>
          <th>Prix Unitaire</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="ligne-table-body">
        <tr>
          <td><input type="text" class="form-control" required></td>
          <td><input type="number" class="form-control" required></td>
          <td><input type="number" class="form-control" required></td>
          <td><button type="button" class="btn btn-danger remove-ligne">Supprimer</button></td>
        </tr>
      </tbody>
    </table>

    <button type="button" class="btn btn-primary" id="add-ligne">Ajouter un ligne</button>
    <button type="submit" class="btn btn-success">Créer la Facture</button>
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let ligneIndex = 1;
  document.getElementById('add-ligne').addEventListener('click', function() {
    const tbody = document.getElementById('ligne-table-body');
    const newRow = document.createElement('tr');
    newRow.innerHTML = `
      <td><input type="text" class="form-control" required></td>
      <td><input type="number" class="form-control" required></td>
      <td><input type="number" class="form-control" required></td>
      <td><button type="button" class="btn btn-danger remove-ligne">Supprimer</button></td>
    `;
    tbody.appendChild(newRow);
    ligneIndex++;
  });

  document.getElementById('ligne-table-body').addEventListener('click', function(e) {
    if (e.target && e.target.classList.contains('remove-ligne')) {
      e.target.closest('tr').remove();
    }
  });
});
</script>
</body>
</html>
